<script src="~/assets/plugins/ckeditor/ckeditor.js"></script> 

@*<div class="modal-dialog">
   
        <div class="modal-content">
        </div>
    </div>*@
<div class="row">
    <div class="form-group">
        <div class="col-md-12">
            <div>
                <input type="text" id="editor" class="form-control" />

            </div>
            <button type="button" class="btn btn-primary" onclick="SaveContent()">Save changes</button>
        </div>
    </div>
</div>
 
           
<!-- Modal -->
<div class="modal fade" id="ContentEditorModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="width:26cm">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="ModalCTitle">Header Content
                    <button type="button" class="close pull-right" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                 </h4>
                
            </div>
            <div class="modal-body"> 
               
            </div>
           
            <div>
                <label id="ModalCTitle"></label>
                <input type="text" id="editor" class="form-control" />

            </div>
                <button type="button" class="btn btn-primary" onclick="SaveContent()">Save changes</button>
           
        </div>
    </div>
</div>
<script>
    debugger;
    var initSample = (function () {

        var editor = CKEDITOR.instances['editor'];
        if (editor) { editor.destroy(true); }

        var wysiwygareaAvailable = isWysiwygareaAvailable(),
            isBBCodeBuiltIn = !!CKEDITOR.plugins.get('bbcode');

        return function () {
            var editorElement = CKEDITOR.document.getById('editor');

            // :(((
            if (isBBCodeBuiltIn) {
                
            }
            debugger;
            // Depending on the wysiwygare plugin availability initialize classic or inline editor.
            if (wysiwygareaAvailable) {
                CKEDITOR.replace('editor', {
                    extraPlugins: 'image',
                   

                    // Configure your file manager integration. This example uses CKFinder 3 for PHP.
                    filebrowserBrowseUrl: $app.baseUrl + "assets/plugins/ckeditor/LinkBrowser.aspx",
                    filebrowserImageBrowseUrl: $app.baseUrl + "assets/plugins/ckeditor/ImageBrowser.aspx",
                    filebrowserUploadUrl: '/Content/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files',
                    filebrowserImageUploadUrl: '/Content/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images',

                    // Upload dropped or pasted images to the CKFinder connector (note that the response type is set to JSON).
                    uploadUrl: '/Content/ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files&responseType=json',

                    // Reduce the list of block elements listed in the Format drop-down to the most commonly used.
                    format_tags: 'p;h1;h2;h3;pre',
                    // Simplify the Image and Link dialog windows. The "Advanced" tab is not needed in most cases.
                    removeDialogTabs: 'image:advanced;link:advanced',

                    height: 450
                });
            } else {
                editorElement.setAttribute('contenteditable', 'true');
                CKEDITOR.inline('editor');

                // TODO we can consider displaying some info box that
                // without wysiwygarea the classic editor may not work.
            }
        };

        function isWysiwygareaAvailable() {
            // If in development mode, then the wysiwygarea must be available.
            // Split REV into two strings so builder does not replace it :D.
            if (CKEDITOR.revision == ('%RE' + 'V%')) {
                return true;
            }

            return !!CKEDITOR.plugins.get('wysiwygarea');
        }
    })();

    initSample();
   
    function EditContent(e) 
    {
        debugger;
        if (e.id == "HeaderEdit")
        {
            $('#ModalCTitle').text('Header Content');
            CKEDITOR.instances.editor.setData($Payslipsetting.HeaderContent);
            return true;
        }
        else
        {
            $('#ModalCTitle').text('Footer Content');
            CKEDITOR.instances.editor.setData($Payslipsetting.FooterContent);
            return true;
        }

    }
    function SaveContent()
    {
        debugger;
        var currentflag = $('#ModalCTitle').text();
        var data = CKEDITOR.instances.editor.getData();
        if (currentflag == 'Header Content') {
            $Payslipsetting.HeaderContent = data;
        } else {
            $Payslipsetting.FooterContent = data;
        }
        $app.showAlert('saved', 1);
        //CKEDITOR.instances.editor.setData('');
        //$('.modal#ContentEditorModalCenter').toggle();
    }
</script>

